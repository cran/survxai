<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Introduction</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<h1>Introduction</h1>

<p>Package <em>survxai</em> contains functions for creating a unified representation of a survival models. Such representations can be further processed by various survival explainers. Tools implemented in <em>survxai</em> help to understand how input variables are used in the model and what impact do they have on final model prediction.</p>

<p>The analyses carried out using this package can be divided into two parts: local analyses of new observations and global analyses showing the structures of survival models. This vignette describes local explanations.</p>

<p>Methods and functions in  <em>survxai</em> package are based on <a href="https://github.com/ModelOriented/DALEX"><em>DALEX</em> package</a>. </p>

<h1>Use case - data</h1>

<h2>Data set</h2>

<p>In our use case we will use the data from the Mayo Clinic trial in primary biliary cirrhosis (PBC) of the liver conducted between 1974 and 1984. A total of 424 PBC patients, referred to Mayo Clinic during that ten-year interval, met eligibility criteria for the randomized placebo controlled trial of the drug D-penicillamine. The
first 312 cases in the data set participated in the randomized trial and contain largely complete data.
The <code>pbc</code> data is included in the <a href="https://CRAN.R-project.org/package=randomForestSRC"><em>randomForestSRC</em> package</a>.</p>

<pre><code class="r">data(pbc, package = &quot;randomForestSRC&quot;)
pbc &lt;- pbc[complete.cases(pbc),]

head(pbc)
</code></pre>

<pre><code>##   days status treatment   age sex ascites hepatom spiders edema bili chol
## 1  400      1         1 21464   1       1       1       1   1.0 14.5  261
## 2 4500      0         1 20617   1       0       1       1   0.0  1.1  302
## 3 1012      1         1 25594   0       0       0       0   0.5  1.4  176
## 4 1925      1         1 19994   1       0       1       1   0.5  1.8  244
## 5 1504      0         2 13918   1       0       1       1   0.0  3.4  279
## 7 1832      0         2 20284   1       0       1       0   0.0  1.0  322
##   albumin copper    alk   sgot trig platelet prothrombin stage
## 1    2.60    156 1718.0 137.95  172      190        12.2     4
## 2    4.14     54 7394.8 113.52   88      221        10.6     3
## 3    3.48    210  516.0  96.10   55      151        12.0     4
## 4    2.54     64 6121.8  60.63   92      183        10.3     4
## 5    3.53    143  671.0 113.15   72      136        10.9     3
## 7    4.09     52  824.0  60.45  213      204         9.7     3
</code></pre>

<p>Our original data set contains only the numerical variables. 
For this usecase we convert variables <code>sex</code> and <code>stage</code> to factor variables.</p>

<pre><code class="r">pbc$sex &lt;- as.factor(pbc$sex)
pbc$stage &lt;- as.factor(pbc$stage)
</code></pre>

<h2>Models</h2>

<p>We will create Cox proportional hazards model based on five variables from our data set: <code>age</code>, <code>treatment</code>, <code>status</code>, <code>sex</code> and <code>bili</code>.</p>

<pre><code class="r">set.seed(1024)
library(rms)
library(survxai)

pbc_smaller &lt;- pbc[,c(&quot;days&quot;, &quot;status&quot;, &quot;treatment&quot;, &quot;sex&quot;, &quot;age&quot;, &quot;bili&quot;, &quot;stage&quot;)]
head(pbc_smaller)
</code></pre>

<pre><code>##   days status treatment sex   age bili stage
## 1  400      1         1   1 21464 14.5     4
## 2 4500      0         1   1 20617  1.1     3
## 3 1012      1         1   0 25594  1.4     4
## 4 1925      1         1   1 19994  1.8     4
## 5 1504      0         2   1 13918  3.4     3
## 7 1832      0         2   1 20284  1.0     3
</code></pre>

<pre><code class="r">cph_model &lt;- cph(Surv(days/365, status) ~ treatment + sex + age + bili + stage , data = pbc_smaller, surv = TRUE, x = TRUE, y=TRUE)
</code></pre>

<h1>Local explanations</h1>

<p>In this section we will focus on the local explanations - the explanations for chosen new observations.</p>

<h2>Explainers</h2>

<p>First, we have to create survival explainers - objects to wrap-up the black-box model with meta-data. Explainers unify model interfacing.</p>

<p>We have to define custom predict function which takes three arguments: model, data and vector with time points. Predict funcions may vary depending on the model. Examples for some models are in <a href="https://github.com/MI2DataLab/survxai/blob/master/vignettes/Custom_predict_for_survival_models.Rmd">Explainations of different survival models vignette</a>.</p>

<pre><code class="r">predict_times &lt;- function(model, data, times){
  prob &lt;- rms::survest(model, data, times = times)$surv
  return(prob)
}

surve_cph &lt;- explain(model = cph_model,
                  data = pbc_smaller[,-c(1,2)], y = Surv(pbc_smaller$days/365, pbc_smaller$status),
                  predict_function = predict_times)

print(surve_cph)
</code></pre>

<pre><code>## Model label:  coxph 
## Model class:  cph,rms,coxph 
## Data head  :
##   treatment sex   age bili stage
## 1         1   1 21464 14.5     4
## 2         1   1 20617  1.1     3
</code></pre>

<h2>Ceteris paribus</h2>

<p>Ceteris Paribus Plots (What-If Plots) are designed to present model responses around a single point in the feature space.
For more details for generalised models of machine learning see: <a href="https://github.com/pbiecek/ceterisParibus">https://github.com/pbiecek/ceterisParibus</a>.</p>

<p>Ceteris Paribus Plots for survival models are survival curves around one observation. Each curve represent observation with different value of chosen variable. For factor variables curves covers all possible values, for numeric variables values are divided into quantiles.</p>

<p>Ceteris Paribus Plot illustrates how will the survival curve change along with the changing variable.</p>

<p>Below, we plot Ceteris Paribus for one observation.</p>

<pre><code class="r">single_observation &lt;- pbc_smaller[1,-c(1,2)]
single_observation
</code></pre>

<pre><code>##   treatment sex   age bili stage
## 1         1   1 21464 14.5     4
</code></pre>

<pre><code class="r">cp_cph &lt;- ceteris_paribus(surve_cph, single_observation)
print(cp_cph)
</code></pre>

<pre><code>##       y_hat new_x     vname   x_quant quant relative_quant label      time
## 1 0.9789502     1 treatment 0.4927536     0     -0.4927536 coxph 0.1123288
## 2 0.9574511     1 treatment 0.4927536     0     -0.4927536 coxph 0.1397260
## 3 0.9360096     1 treatment 0.4927536     0     -0.4927536 coxph 0.1945205
## 4 0.9147630     1 treatment 0.4927536     0     -0.4927536 coxph 0.2109589
## 5 0.8929362     1 treatment 0.4927536     0     -0.4927536 coxph 0.3013699
## 6 0.8715713     1 treatment 0.4927536     0     -0.4927536 coxph 0.3589041
##     class
## 1 numeric
## 2 numeric
## 3 numeric
## 4 numeric
## 5 numeric
## 6 numeric
</code></pre>

<p>After creating the <code>surv_ceteris_paribus</code> object we can visualize it in a very convinient way using the generic <code>plot()</code> function. Black line represent prediction of original observation.</p>

<pre><code class="r">plot(cp_cph, scale_type = &quot;gradient&quot;, scale_col = c(&quot;red&quot;, &quot;blue&quot;), ncol = 2)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-2"/></p>

<p>We can see that there are  differences for stages. Next, we will plot Ceteris Paribus for sigle variable <code>stage</code>.</p>

<pre><code class="r">plot(cp_cph, selected_variable = &quot;stage&quot;, scale_type = &quot;gradient&quot;, scale_col = c(&quot;red&quot;, &quot;blue&quot;))
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-3"/></p>

<p>We see a trend that a lower <code>stage</code> means a higher probability of survival for chosen observation.</p>

<h2>Prediction breakdown</h2>

<p>Break Down Plot presents variable contributions in final predictions.
For more details for generalised models of machine learning see: <a href="https://github.com/pbiecek/breakDown">https://github.com/pbiecek/breakDown</a>.</p>

<p>Break Down Plots for survival models compare differences in predictions for median of time. </p>

<pre><code class="r">broken_prediction_cph &lt;- prediction_breakdown(surve_cph, pbc_smaller[1,-c(1,2)])
print(broken_prediction_cph)
</code></pre>

<pre><code>##           contribution
## bili          -42.553%
## stage         -19.083%
## age            -5.153%
## treatment      -1.055%
## sex             0.354%
</code></pre>

<p>After creating the <code>surv_prediction_breakdown</code> object we can visualize it in a very convinient way using the generic <code>plot()</code> function.</p>

<pre><code class="r">plot(broken_prediction_cph, scale_col = c(&quot;red&quot;, &quot;blue&quot;))
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-4"/></p>

<p>This plot helps to understand the factors that drive survival probability for a single observation.</p>

</body>

</html>
