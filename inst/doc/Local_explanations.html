<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Introduction</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<h1>Introduction</h1>

<p>Package <em>survxai</em> contains functions for creating a unified representation of a survival models. Such representations can be further processed by various survival explainers. Tools implemented in <em>survxai</em> help to understand how input variables are used in the model and what impact do they have on final model prediction.</p>

<p>The analyses carried out using this package can be divided into two parts: local analyses of new observations and global analyses showing the structures of survival models. This vignette describes local explanations.</p>

<p>Methods and functions in  <em>survxai</em> package are based on <a href="https://github.com/pbiecek/DALEX"><em>DALEX</em> package</a>. </p>

<h1>Use case - data</h1>

<h2>Data set</h2>

<p>In our use case we will use the data from the Mayo Clinic trial in primary biliary cirrhosis (PBC) of the liver conducted between 1974 and 1984. A total of 424 PBC patients, referred to Mayo Clinic during that ten-year interval, met eligibility criteria for the randomized placebo controlled trial of the drug D-penicillamine. The
first 312 cases in the data set participated in the randomized trial and contain largely complete data.
The <code>pbc</code> data is included in the <a href="https://CRAN.R-project.org/package=randomForestSRC"><em>randomForestSRC</em> package</a>.</p>

<pre><code class="r">data(pbc, package = &quot;randomForestSRC&quot;)
pbc &lt;- pbc[complete.cases(pbc),]

head(pbc)
</code></pre>

<pre><code>##   days status treatment   age sex ascites hepatom spiders edema bili chol
## 1  400      1         1 21464   1       1       1       1   1.0 14.5  261
## 2 4500      0         1 20617   1       0       1       1   0.0  1.1  302
## 3 1012      1         1 25594   0       0       0       0   0.5  1.4  176
## 4 1925      1         1 19994   1       0       1       1   0.5  1.8  244
## 5 1504      0         2 13918   1       0       1       1   0.0  3.4  279
## 7 1832      0         2 20284   1       0       1       0   0.0  1.0  322
##   albumin copper    alk   sgot trig platelet prothrombin stage
## 1    2.60    156 1718.0 137.95  172      190        12.2     4
## 2    4.14     54 7394.8 113.52   88      221        10.6     3
## 3    3.48    210  516.0  96.10   55      151        12.0     4
## 4    2.54     64 6121.8  60.63   92      183        10.3     4
## 5    3.53    143  671.0 113.15   72      136        10.9     3
## 7    4.09     52  824.0  60.45  213      204         9.7     3
</code></pre>

<p>Our original data set contains only the numerical variables. 
For this usecase we convert variables <code>sex</code> and <code>stage</code> to factor variables.</p>

<pre><code class="r">pbc$sex &lt;- as.factor(pbc$sex)
pbc$stage &lt;- as.factor(pbc$stage)
</code></pre>

<h2>Models</h2>

<p>We will create Cox proportional hazards model based on five variables from our data set: <code>age</code>, <code>treatment</code>, <code>status</code>, <code>sex</code> and <code>bili</code>.</p>

<pre><code class="r">set.seed(1024)
library(rms)
library(survxai)

pbc_smaller &lt;- pbc[,c(&quot;days&quot;, &quot;status&quot;, &quot;treatment&quot;, &quot;sex&quot;, &quot;age&quot;, &quot;bili&quot;, &quot;stage&quot;)]
head(pbc_smaller)
</code></pre>

<pre><code>##   days status treatment sex   age bili stage
## 1  400      1         1   1 21464 14.5     4
## 2 4500      0         1   1 20617  1.1     3
## 3 1012      1         1   0 25594  1.4     4
## 4 1925      1         1   1 19994  1.8     4
## 5 1504      0         2   1 13918  3.4     3
## 7 1832      0         2   1 20284  1.0     3
</code></pre>

<pre><code class="r">cph_model &lt;- cph(Surv(days/365, status)~. , data = pbc_smaller, surv = TRUE, x = TRUE, y=TRUE)
</code></pre>

<h1>Local explanations</h1>

<p>In this section we will focus on the local explanations - the explanations for chosen new observations.</p>

<h2>Explainers</h2>

<p>First, we have to create survival explainers - objects to wrap-up the black-box model with meta-data. Explainers unify model interfacing.</p>

<p>We have to define custom predict function which takes three arguments: model, data and vector with time points. Predict funcions may vary depending on the model. Examples for some models are in <a href="https://github.com/MI2DataLab/survxai/blob/master/vignettes/Custom_predict_for_survival_models.Rmd">Explainations of different survival models vignette</a>.</p>

<pre><code class="r">predict_times &lt;- function(model, data, times){
  prob &lt;- rms::survest(model, data, times = times)$surv
  return(prob)
}

surve_cph &lt;- explain(model = cph_model,
                  data = pbc_smaller[,-c(1,2)], y = Surv(pbc_smaller$days/365, pbc_smaller$status),
                  predict_function = predict_times)

print(surve_cph)
</code></pre>

<pre><code>## Model label:  coxph 
## Model class:  cph,rms,coxph 
## Data head  :
##   treatment sex   age bili stage
## 1         1   1 21464 14.5     4
## 2         1   1 20617  1.1     3
</code></pre>

<h2>Ceteris paribus</h2>

<p>Ceteris Paribus Plots (What-If Plots) are designed to present model responses around a single point in the feature space.
For more details for generalised models of machine learning see: <a href="https://github.com/pbiecek/ceterisParibus">https://github.com/pbiecek/ceterisParibus</a>.</p>

<p>Ceteris Paribus Plots for survival models are survival curves around one observation. Each curve represent observation with different value of chosen variable. For factor variables curves covers all possible values, for numeric variables values are divided into quantiles.</p>

<p>Ceteris Paribus Plot illustrates how will the survival curve change along with the changing variable.</p>

<p>Below, we plot Ceteris Paribus for one observation.</p>

<pre><code class="r">single_observation &lt;- pbc_smaller[1,-c(1,2)]
single_observation
</code></pre>

<pre><code>##   treatment sex   age bili stage
## 1         1   1 21464 14.5     4
</code></pre>

<pre><code class="r">cp_cph &lt;- ceteris_paribus(surve_cph, single_observation)
print(cp_cph)
</code></pre>

<pre><code>##       y_hat new_x     vname   x_quant quant relative_quant label      time
## 1 0.9789502     1 treatment 0.4927536     0     -0.4927536 coxph 0.1123288
## 2 0.9574511     1 treatment 0.4927536     0     -0.4927536 coxph 0.1397260
## 3 0.9360096     1 treatment 0.4927536     0     -0.4927536 coxph 0.1945205
## 4 0.9147630     1 treatment 0.4927536     0     -0.4927536 coxph 0.2109589
## 5 0.8929362     1 treatment 0.4927536     0     -0.4927536 coxph 0.3013699
## 6 0.8715713     1 treatment 0.4927536     0     -0.4927536 coxph 0.3589041
##     class
## 1 numeric
## 2 numeric
## 3 numeric
## 4 numeric
## 5 numeric
## 6 numeric
</code></pre>

<p>After creating the <code>surv_ceteris_paribus</code> object we can visualize it in a very convinient way using the generic <code>plot()</code> function. Black line represent prediction of original observation.</p>

<pre><code class="r">plot(cp_cph, scale_type = &quot;gradient&quot;, scale_col = c(&quot;red&quot;, &quot;blue&quot;), ncol = 2)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-2"/></p>

<p>We can see that there are  differences for stages. Next, we will plot Ceteris Paribus for sigle variable <code>stage</code>.</p>

<pre><code class="r">plot(cp_cph, selected_variable = &quot;stage&quot;, scale_type = &quot;gradient&quot;, scale_col = c(&quot;red&quot;, &quot;blue&quot;))
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-3"/></p>

<p>We see a trend that a lower <code>stage</code> means a higher probability of survival for chosen observation.</p>

<h2>Prediction breakdown</h2>

<p>Break Down Plot presents variable contributions in final predictions.
For more details for generalised models of machine learning see: <a href="https://github.com/pbiecek/breakDown">https://github.com/pbiecek/breakDown</a>.</p>

<p>Break Down Plots for survival models compare differences in predictions for median of time. </p>

<pre><code class="r">broken_prediction_cph &lt;- prediction_breakdown(surve_cph, pbc_smaller[1,-c(1,2)])
print(broken_prediction_cph)
</code></pre>

<pre><code>##           contribution
## bili          -42.553%
## stage         -19.083%
## age            -5.153%
## treatment      -1.055%
## sex             0.354%
</code></pre>

<p>After creating the <code>surv_prediction_breakdown</code> object we can visualize it in a very convinient way using the generic <code>plot()</code> function.</p>

<pre><code class="r">plot(broken_prediction_cph, scale_col = c(&quot;red&quot;, &quot;blue&quot;))
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-4"/></p>

<p>This plot helps to understand the factors that drive survival probability for a single observation.</p>

</body>

</html>
